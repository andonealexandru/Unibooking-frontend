<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>My reservations</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">My reservations</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-list>
    @if (reservationReadyForCheckIn !== null) {
      <ion-list-header>
        <ion-label>Check in</ion-label>
      </ion-list-header>
      <reservation-with-room-card [reservation]="reservationReadyForCheckIn" color="warning" (click)="openActionSheet(reservationReadyForCheckIn.id)" />
    }

    @if (activeReservation !== null) {
      <ion-list-header>
        <ion-label>Now</ion-label>
      </ion-list-header>
      <reservation-with-room-card [reservation]="activeReservation" color="primary" (click)="openActionSheet(activeReservation.id)" />
    }

    <ion-list-header>
      <ion-datetime-button datetime="datetime"></ion-datetime-button>
    </ion-list-header>

    @for (reservation of reservations; track reservation.id) {
      <reservation-with-room-card [reservation]="reservation" (click)="openActionSheet(reservation.id)" />
    } @empty {
      <ion-item>
        <ion-label>No reservations for today!</ion-label>
      </ion-item>
    }
  </ion-list>

  
  <ion-action-sheet
    [isOpen]="isActionSheetOpen"
    [buttons]="currentActionSheetButtons"
    (didDismiss)="logResult($event)"></ion-action-sheet>

  <ion-modal [keepContentsMounted]="true">
    <ng-template>
      <ion-datetime
        #datePicker
        id="datetime"
        presentation="date"
        (ionChange)="refreshReservations(datePicker.value); datePicker.cancel(true)">
      </ion-datetime>
    </ng-template>
  </ion-modal>
</ion-content>
